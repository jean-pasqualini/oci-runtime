TrÃ¨s bonne question ğŸ‘Œ â€” et la rÃ©ponse tient au fait que les canaux ne servent pas aux mÃªmes interlocuteurs.

â¸»

ğŸ”¹ INITPIPE & SYNCPIP = communication parent/enfant immÃ©diats
â€¢	Qui parle ?
runc create (parent) â†” runc init (enfant quâ€™il vient de fork/exec).
â€¢	DurÃ©e de vie ?
Seulement pendant lâ€™appel runc create.
â€¢	Comment faire ?
â Un pipe/sockpair anonyme (ExtraFiles) suffit, car le parent et lâ€™enfant partagent dÃ©jÃ  le mÃªme espace de FDs.
â€¢	Pas besoin de nom dans le FS :
â€¢	personne dâ€™autre nâ€™a besoin dâ€™y accÃ©der,
â€¢	câ€™est un one-shot,
â€¢	câ€™est dÃ©truit automatiquement quand les deux extrÃ©mitÃ©s se ferment.

â¸»

ğŸ”¹ FIFOFD = communication entre deux processus distincts et non reliÃ©s
â€¢	Qui parle ?
runc init (qui reste bloquÃ©) â†” plus tard un nouveau processus runc start (pas lâ€™ancien parent, qui est mort).
â€¢	DurÃ©e de vie ?
Entre runc create et runc start. Peut durer plusieurs secondes/minutes/heures.
â€¢	Pourquoi une FIFO nommÃ©e ?
â€¢	Parce que ces deux processus nâ€™ont pas de relation parent/enfant â†’ impossible de se passer un pipe anonyme via ExtraFiles.
â€¢	Ils ont besoin dâ€™un point de rendez-vous persistant dans le FS (/run/runc/<id>/exec.fifo).
â€¢	Câ€™est ce â€œfichier spÃ©cialâ€ qui permet au runc start de retrouver lâ€™init et de le dÃ©bloquer.

â¸»

ğŸ”¹ En rÃ©sumÃ©
â€¢	INITPIPE & SYNCPIPE : Ã©phÃ©mÃ¨res, privÃ©s, internes au create. Un simple pipe anonyme suffit.
â€¢	FIFOFD : doit survivre au create et Ãªtre rÃ©utilisable par un autre runc plus tard (start). Donc â†’ nommÃ© dans le FS.

â¸»

ğŸ‘‰ Tu veux que je te fasse un schÃ©ma avec 3 temps (create â†’ pause â†’ start) pour montrer quels pipes existent encore et pourquoi FIFO doit rester dans le FS ?